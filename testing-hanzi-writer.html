<!doctype html>
<html lang="en">
<head data-version="1.1.2">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>test</title>
	<link rel="stylesheet" href="res/libs/normalize.css">
	<link rel="stylesheet" href="res/default.css">
	<script src="res/fontsB64/noto-sans-light.js"></script>
	<script src="res/fontsB64/ar-pl-ukai-cn-ff-ttf.js"></script>
	<script src="res/fontsB64/ar-pl-ukai-cn-ff-ttf-part-2.js"></script>
	<script src="res/libs/jquery.js"></script>
	<script src="res/libs/jspdf.js"></script>
	<script src="res/libs/svg2pdf.js"></script>
	<script src="res/libs/hanzi-writer.min.js"></script>
	<script src="res/ref.js"></script>
	<script src="res/secToggle.js"></script>
	<script src="res/createPdf.js"></script>
</head>
<body>
	<button onclick="createPDF();">Go!</button>
	<div id="character-target-div" style=""></div>
	<script>
		$(document).ready(function(){
			function renderFanningStrokes(target, strokes) {
			  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
			  svg.style.width = '6.75px';
			  svg.style.height = '6.75px';
			  svg.style.marginRight = '3px';
			  target.appendChild(svg);
			  var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

			  // set the transform property on the g element so the character renders at 75x75
			  var transformData = HanziWriter.getScalingTransform(6.75,6.75);
			  group.setAttributeNS(null, 'transform', transformData.transform);
			  //group.setAttributeNS(null, 'style', 'height: 100%, width: 100%');
			  svg.appendChild(group);

			  strokes.forEach(function(strokePath) {
				var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
				path.setAttributeNS(null, 'd', strokePath);
				// style the character paths
				path.style.fill = '#000';
				group.appendChild(path);
			  });
			}
			
			HanziWriter.loadCharacterData('È§ê').then(function(charData) {
				var target = document.getElementById('character-target-div');
				for (var i = 0; i < charData.strokes.length; i++) {
					var strokesPortion = charData.strokes.slice(0, i + 1);
					renderFanningStrokes(target, strokesPortion);
					//console.log(strokesPortion);
				}
			});
			
		});
		var createPDF = function () {
			var pdf = new jsPDF();
			
			pdf.rect(33,50,177,6.8);
			
			var charSvgs = document.getElementById('character-target-div').childNodes;
			
			for(i = 0; i < charSvgs.length; i++){
				svg2pdf(charSvgs[i], pdf, {
					xOffset: 33 + i * 7.2,
					yOffset: 50,
					scale: 1
				});
			}
			
			pdf.output('dataurlnewwindow');
		}
	</script>
</body>
</html>




























